import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.IOException;
import java.io.PrintWriter;

public class EditPane extends JPanel implements ActionListener
{
	private Item item = new Item(null, null);
	private JFrame f;
	private JTextField nameArea = new JTextField("");
	private JLabel nameLabel = new JLabel("Name");
	
	private JTextArea descArea = new JTextArea("");
	private JLabel descLabel = new JLabel("Description");
	private JScrollPane scroll = new JScrollPane(descArea);
	private JButton save = new JButton("Save");
	
	private String newName;
	private String newDesc;
	
	public EditPane(int n)
	{
		f = new JFrame("Edit");
		f.setVisible(true);
		f.setSize(600, 600);
		f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
		
		JPanel p = new JPanel();
		FlowLayout flay = new FlowLayout();
		p.setLayout(flay);
		p.setBackground(Main.bGroundColor);
		
		p.add(nameLabel);
		p.add(nameArea);
		nameArea.setPreferredSize(new Dimension(550, 50));
		nameArea.setColumns(50);
		
		p.add(descLabel);
		p.add(scroll);
		descArea.setColumns(50);
		descArea.setRows(20);
		descArea.getLineWrap();
		
		nameArea.setText(Main.items.get(n).getName());
		descArea.setText(Main.items.get(n).getDesc());
		
		p.add(save);
		save.addActionListener(this);
		
		f.add(p);		
	}
	
	private void setNewName(String s)
	{
		newName = s;
	}
	private String getNewName()
	{
		return newName;
	}
	
	private void setNewDesc(String s)
	{
		newDesc = s;
	}
	private String getNewDesc()
	{
		return newDesc;
	}
	
	public void actionPerformed(ActionEvent d)
	{
		if(d.getSource() == save)
		{
			setNewName(nameArea.getText());
			setNewDesc(descArea.getText());
			item.setName(getNewName());
			item.setDesc(getNewDesc());
			Main.items.add(item);
			WriteFile();
			f.dispose();
		}
	}
	public void WriteFile()
	{
		try
		{
			PrintWriter printFile = new PrintWriter(Main.file);
			for(int i = 0; i < Main.items.size(); i++)
			{
				printFile.println(Main.items.get(i).getName() + "; " + Main.items.get(i).getDesc());
			}
			
			printFile.close();
		}
		catch (IOException e)
		{
			e.printStackTrace();
		}		
	}	
}
